"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3901],{63901:function(t,i,e){e.r(i),e.d(i,{HLSProvider:function(){return td}});var s=e(52396),n=e(21862),a=e(93936),l=e(24978),h=e(21135),o=e(34967),r=e(27485);e(2265);let d=t=>(0,o.camelToKebabCase)(t);var c=new WeakMap,_=new WeakMap,u=new WeakMap,v=new WeakMap,f=new WeakMap,w=new WeakSet,p=new WeakSet,k=new WeakSet,S=new WeakSet,b=new WeakSet,g=new WeakSet,E=new WeakSet,y=new WeakSet,W=new WeakSet,T=new WeakSet,L=new WeakSet,m=new WeakSet,M=new WeakSet,D=new WeakSet,O=new WeakSet;class x{get instance(){return(0,s._)(this,u)}setup(t){let{streamType:i}=(0,s._)(this,_).$state,e=(0,o.peek)(i).includes("live"),n=(0,o.peek)(i).includes("ll-");(0,a._)(this,u,new t({lowLatencyMode:n,backBufferLength:n?4:e?8:void 0,renderTextTracksNatively:!1,...this.config}));let h=(0,l._)(this,S,V).bind(this);for(let i of Object.values(t.Events))(0,s._)(this,u).on(i,h);for(let i of((0,s._)(this,u).on(t.Events.ERROR,(0,l._)(this,L,U).bind(this)),(0,s._)(this,f)))i((0,s._)(this,u));(0,s._)(this,_).player.dispatch("hls-instance",{detail:(0,s._)(this,u)}),(0,s._)(this,u).attachMedia((0,s._)(this,c)),(0,s._)(this,u).on(t.Events.AUDIO_TRACK_SWITCHED,(0,l._)(this,E,N).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_SWITCHED,(0,l._)(this,y,P).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_LOADED,(0,l._)(this,T,q).bind(this)),(0,s._)(this,u).on(t.Events.LEVEL_UPDATED,(0,l._)(this,W,$).bind(this)),(0,s._)(this,u).on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(0,l._)(this,b,H).bind(this)),(0,s._)(this,u).on(t.Events.CUES_PARSED,(0,l._)(this,g,R).bind(this)),(0,s._)(this,_).qualities[r.WX.enableAuto]=(0,l._)(this,M,F).bind(this),(0,o.listenEvent)((0,s._)(this,_).qualities,"change",(0,l._)(this,D,K).bind(this)),(0,o.listenEvent)((0,s._)(this,_).audioTracks,"change",(0,l._)(this,O,X).bind(this)),(0,a._)(this,v,(0,o.effect)((0,l._)(this,p,I).bind(this)))}onInstance(t){return(0,s._)(this,f).add(t),()=>(0,s._)(this,f).delete(t)}loadSource(t){var i;(0,o.isString)(t.src)&&(null===(i=(0,s._)(this,u))||void 0===i||i.loadSource(t.src))}destroy(){var t,i;null===(t=(0,s._)(this,u))||void 0===t||t.destroy(),(0,a._)(this,u,null),null===(i=(0,s._)(this,v))||void 0===i||i.call(this),(0,a._)(this,v,null)}constructor(t,i){(0,h._)(this,w),(0,h._)(this,p),(0,h._)(this,k),(0,h._)(this,S),(0,h._)(this,b),(0,h._)(this,g),(0,h._)(this,E),(0,h._)(this,y),(0,h._)(this,W),(0,h._)(this,T),(0,h._)(this,L),(0,h._)(this,m),(0,h._)(this,M),(0,h._)(this,D),(0,h._)(this,O),(0,n._)(this,c,{writable:!0,value:void 0}),(0,n._)(this,_,{writable:!0,value:void 0}),(0,n._)(this,u,{writable:!0,value:void 0}),(0,n._)(this,v,{writable:!0,value:void 0}),(0,n._)(this,f,{writable:!0,value:void 0}),(0,a._)(this,u,null),(0,a._)(this,v,null),this.config={},(0,a._)(this,f,new Set),(0,a._)(this,c,t),(0,a._)(this,_,i)}}function A(t,i){return new o.DOMEvent(d(t),{detail:i})}function I(){if(!(0,s._)(this,_).$state.live())return;let t=new r.LK((0,l._)(this,k,C).bind(this));return t.start(),t.stop.bind(t)}function C(){var t,i;(0,s._)(this,_).$state.liveSyncPosition.set(null!==(i=null===(t=(0,s._)(this,u))||void 0===t?void 0:t.liveSyncPosition)&&void 0!==i?i:1/0)}function V(t,i){var e;null===(e=(0,s._)(this,_).player)||void 0===e||e.dispatch((0,l._)(this,w,A).call(this,t,i))}function H(t,i){let e=(0,l._)(this,w,A).call(this,t,i),n=-1;for(let t=0;t<i.tracks.length;t++){var a;let l=i.tracks[t],h=null!==(a=l.subtitleTrack)&&void 0!==a?a:l.closedCaptions,o=new r.n8({id:"hls-".concat(l.kind,"-").concat(t),src:null==h?void 0:h.url,label:l.label,language:null==h?void 0:h.lang,kind:l.kind,default:l.default});o[r.kA.readyState]=2,o[r.kA.onModeChange]=()=>{"showing"===o.mode?((0,s._)(this,u).subtitleTrack=t,n=t):n===t&&((0,s._)(this,u).subtitleTrack=-1,n=-1)},(0,s._)(this,_).textTracks.add(o,e)}}function R(t,i){var e;let n=null===(e=(0,s._)(this,u))||void 0===e?void 0:e.subtitleTrack,a=(0,s._)(this,_).textTracks.getById("hls-".concat(i.type,"-").concat(n));if(!a)return;let h=(0,l._)(this,w,A).call(this,t,i);for(let t of i.cues)t.positionAlign="auto",a.addCue(t,h)}function N(t,i){let e=(0,s._)(this,_).audioTracks[i.id];if(e){let n=(0,l._)(this,w,A).call(this,t,i);(0,s._)(this,_).audioTracks[r.HV.select](e,!0,n)}}function P(t,i){let e=(0,s._)(this,_).qualities[i.level];if(e){let n=(0,l._)(this,w,A).call(this,t,i);(0,s._)(this,_).qualities[r.HV.select](e,!0,n)}}function $(t,i){i.details.totalduration>0&&(0,s._)(this,_).$state.inferredLiveDVRWindow.set(i.details.totalduration)}function q(t,i){if((0,s._)(this,_).$state.canPlay())return;let{type:e,live:n,totalduration:a,targetduration:h}=i.details,d=(0,l._)(this,w,A).call(this,t,i);(0,s._)(this,_).notify("stream-type-change",n?"EVENT"===e&&Number.isFinite(a)&&h>=10?"live:dvr":"live":"on-demand",d),(0,s._)(this,_).notify("duration-change",a,d);let c=(0,s._)(this,u).media;for(let t of(-1===(0,s._)(this,u).currentLevel&&(0,s._)(this,_).qualities[r.WX.setAuto](!0,d),(0,s._)(this,u).audioTracks)){let i={id:t.id.toString(),label:t.name,language:t.lang||"",kind:"main"};(0,s._)(this,_).audioTracks[r.HV.add](i,d)}for(let t of(0,s._)(this,u).levels){var v,f;let i={id:null!==(f=null===(v=t.id)||void 0===v?void 0:v.toString())&&void 0!==f?f:t.height+"p",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate};(0,s._)(this,_).qualities[r.HV.add](i,d)}c.dispatchEvent(new o.DOMEvent("canplay",{trigger:d}))}function U(t,i){if(i.fatal){if("mediaError"===i.type){var e;null===(e=(0,s._)(this,u))||void 0===e||e.recoverMediaError()}else(0,l._)(this,m,j).call(this,i.error)}}function j(t){(0,s._)(this,_).notify("error",{message:t.message,code:1,error:t})}function F(){(0,s._)(this,u)&&((0,s._)(this,u).currentLevel=-1)}function K(){let{qualities:t}=(0,s._)(this,_);(0,s._)(this,u)&&!t.auto&&((0,s._)(this,u)[t.switch+"Level"]=t.selectedIndex,r.G9&&((0,s._)(this,c).currentTime=(0,s._)(this,c).currentTime))}function X(){let{audioTracks:t}=(0,s._)(this,_);(0,s._)(this,u)&&(0,s._)(this,u).audioTrack!==t.selectedIndex&&((0,s._)(this,u).audioTrack=t.selectedIndex)}var B=new WeakMap,G=new WeakMap,Y=new WeakMap,z=new WeakSet,J=new WeakSet,Q=new WeakSet,Z=new WeakSet;class tt{constructor(t,i,e){(0,h._)(this,z),(0,h._)(this,J),(0,h._)(this,Q),(0,h._)(this,Z),(0,n._)(this,B,{writable:!0,value:void 0}),(0,n._)(this,G,{writable:!0,value:void 0}),(0,n._)(this,Y,{writable:!0,value:void 0}),(0,a._)(this,B,t),(0,a._)(this,G,i),(0,a._)(this,Y,e),(0,l._)(this,z,ti).call(this)}}async function ti(){let t={onLoadStart:(0,l._)(this,J,te).bind(this),onLoaded:(0,l._)(this,Q,ts).bind(this),onLoadError:(0,l._)(this,Z,tn).bind(this)},i=await tl((0,s._)(this,B),t);return((0,o.isUndefined)(i)&&!(0,o.isString)((0,s._)(this,B))&&(i=await ta((0,s._)(this,B),t)),i)?i.isSupported()?i:((0,s._)(this,G).player.dispatch(new o.DOMEvent("hls-unsupported")),(0,s._)(this,G).notify("error",{message:"[vidstack] `hls.js` is not supported in this environment",code:4}),null):null}function te(){(0,s._)(this,G).player.dispatch(new o.DOMEvent("hls-lib-load-start"))}function ts(t){(0,s._)(this,G).player.dispatch(new o.DOMEvent("hls-lib-loaded",{detail:t})),(0,s._)(this,Y).call(this,t)}function tn(t){let i=(0,r.DR)(t);(0,s._)(this,G).player.dispatch(new o.DOMEvent("hls-lib-load-error",{detail:i})),(0,s._)(this,G).notify("error",{message:i.message,code:4,error:i})}async function ta(t){var i,e,s,n,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,o.isUndefined)(t)){if(null===(i=l.onLoadStart)||void 0===i||i.call(l),t.prototype&&t.prototype!==Function)return null===(e=l.onLoaded)||void 0===e||e.call(l,t),t;try{let i=null===(s=await t())||void 0===s?void 0:s.default;if(i&&i.isSupported)null===(n=l.onLoaded)||void 0===n||n.call(l,i);else throw Error("");return i}catch(t){null===(a=l.onLoadError)||void 0===a||a.call(l,t)}}}async function tl(t){var i,e,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,o.isString)(t)){null===(i=n.onLoadStart)||void 0===i||i.call(n);try{if(await (0,r.ve)(t),!(0,o.isFunction)(window.Hls))throw Error("");let i=window.Hls;return null===(e=n.onLoaded)||void 0===e||e.call(n,i),i}catch(t){null===(s=n.onLoadError)||void 0===s||s.call(n,t)}}}var th=new WeakMap,to=new WeakMap,tr=new WeakMap;class td extends r.G6{get ctor(){return(0,s._)(this,th)}get instance(){return(0,s._)(this,to).instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return(0,s._)(this,to).config}set config(t){(0,s._)(this,to).config=t}get library(){return(0,s._)(this,tr)}set library(t){(0,a._)(this,tr,t)}preconnect(){(0,o.isString)((0,s._)(this,tr))&&(0,r.$P)((0,s._)(this,tr))}setup(){super.setup(),new tt((0,s._)(this,tr),this.ctx,t=>{(0,a._)(this,th,t),(0,s._)(this,to).setup(t),this.ctx.notify("provider-setup",this);let i=(0,o.peek)(this.ctx.$state.source);i&&this.loadSource(i)})}async loadSource(t,i){if(!(0,o.isString)(t.src)){this.removeSource();return}this.media.preload=i||"",this.appendSource(t,"application/x-mpegurl"),(0,s._)(this,to).loadSource(t),this.currentSrc=t}onInstance(t){let i=(0,s._)(this,to).instance;return i&&t(i),(0,s._)(this,to).onInstance(t)}destroy(){(0,s._)(this,to).destroy()}constructor(...t){super(...t),(0,n._)(this,th,{writable:!0,value:void 0}),(0,n._)(this,to,{writable:!0,value:void 0}),(0,n._)(this,tr,{writable:!0,value:void 0}),this.$$PROVIDER_TYPE="HLS",(0,a._)(this,th,null),(0,a._)(this,to,new x(this.video,this.ctx)),(0,a._)(this,tr,"".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.5.0/dist/hls",".min.js"))}}td.supported=(0,r.tF)()}}]);